$(document).ready(function(){$("#headerText").keyup(function(){$('.header').html($(this).val().replace(/\n/g,"<br />"));});var notes_previous_value="";$("#notes").keyup(function(){var element=document.querySelector('.body');if($(".fontSizeHeader").val()){$('.body').html($(this).val().replace(/\n/g,"<br />"));}});$('.fontSizeBody').on('change',function(){$(".body").css("font-size",$('.fontSizeBody').val()+"px");});$('.fontSizeHeader').on('change',function(){$(".header").css("font-size",$('.fontSizeHeader').val()+"px");});$('#selectPaper').on('change',function(){$(".paper").css("background-image","url('./dist/img/"+this.value+".jpg')");});$('#selectPage').on('change',function(){$(".paper").css("background-image","url('./dist/pages/"+this.value+".jpg')");});$('#selectFont').on('change',function(){var fontSizeHeader=$(".fontSizeHeader").val();$(".header").css("font-size",fontSizeHeader+"px");$(".body").css("font-size",fontSizeHeader+"px");$(".paper").css("font-family",this.value);});$('#ink').on('change',function(){$(".paper").css("color",this.value);});var selectDefaultValue="";$.ajax({type:"POST",url:"fonts.php",success:function(result){var headFont="<style type=\"text/css\">";for(var i=0;i<result.length;++i){headFont+="@font-face {\n"+
"\tfont-family: \""+result[i].Name+"\";\n"+
"\tsrc:url(\"./dist/fonts/"+result[i].Name+"."+result[i].Extension+"\");\n"+
"}\n";}
headFont+="</style>";$("head").prepend(headFont);var sel=$("#selectFont");sel.empty();var optionSelected=false;for(var i=0;i<result.length;++i){sel.append('<option font_size="'+result[i].font_size+'" value="'+result[i].Name+'">'+result[i].Name+'</option>');}
selectDefaultValue="handwriting-1";sel.val(selectDefaultValue);$(".paper").css("font-family",$('#selectFont').val());},dataType:"json"});$(".applyNote").click(function(){$(".paper").css("font-family",$('#selectFont').val());$(".body").html($(".notes").val());});$(".screen").click(function(){window.scrollTo(0,0)
let div=document.getElementById('paper');var options={scrollX:0,scrollY:-window.scrollY,logging:true,letterRendering:1,allowTaint:false,useCORS:true}
html2canvas(div,options).then(function(canvas){canvas.id="h2canvas";document.getElementById('output').appendChild(canvas);download(canvas.toDataURL("image/png"));});});function download(url){var a=$("<a style='display:none' id='js-downloder'>").attr("href",url).attr("download","note.png").appendTo("body");console.log(a);a[0].click();a.remove();}
$(".paper").css("color",$('#ink').val());$(".body").css("font-size",$('.fontSizeBody').val()+"px");$(".header").css("font-size",$('.fontSizeHeader').val()+"px");});